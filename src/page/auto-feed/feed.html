<!DOCTYPE html>
<html lang="en">
<!-- 메인 페이지 -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="/theme/js/main.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/theme/css/style.css">
    <!---sweet alert 이용을 위해 추가한 코드 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <!-- <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
         crossorigin="anonymous"
      /> -->
    <title>Auto-Feed</title>
    <style>
        .menuButton{
            border: none;
            background-color: white;
        }
    </style>
</head>

<body>
    <div class="text-center">
        <div class="container-mobile">
            <div class="bg-white sticky-top">
                <!-- 상태바 시작-->
                <div class="d-flex justify-content-between pt-2 px-4" id="status-bar">
                    <div><b>12:00</b></div>
                    <div>
                        <i class="bi bi-bluetooth"></i>
                        <i class="bi bi-bar-chart-fill"></i>
                        <i class="bi bi-wifi"></i>
                        <i class="bi bi-battery-full"></i>
                    </div>
                </div>
                <!-- 상태바 끝-->
                <!-- 상단바 시작-->
                <div class="border-bottom d-flex justify-content-between pt-3 px-2">
                    <div class="my-2">
                        <button class="btn btn-default" type="button" onclick="history.back(); ">
                            <h2 class="m-0">
                                <
                            </h2>
                        </button>
                    </div>
                    <div class="my-2 py-3">
                        <h5 class="m-0"><i class="bi bi-apple"></i> 자동 급식기</h5>
                    </div>
                    <div class="my-2">
                        <button class="btn btn-default" type="button" onclick="location.href='home'; ">
                            <h2 class="m-0"><i class="bi bi-house"></i></h2>
                        </button>
                    </div>
                </div>
                <!-- 상단바 끝 -->
            </div>

            <div id="main-content" class="px-4 pb-5">
                <div id="home-center">
                    <div class="row">
                        <div class="col-12 p-0" id="petCare">
                            <a class="text-decoration-none" href="#" id="care">
                                <div class="card m-2 p-2" style="height: 180px;">
                                    <div style="display: flex;">
                                        <div style="float: left; width: 66%;">
                                            <header class="m-3">
                                                <h2 class="text-start font1" style="color: black;">자동 급식기</h2>
                                            </header>
                                            <main class="text-start mx-3" style="color: black;">우리 사랑스러운 아이가 밥을 먹을 수 있도록
                                                도와요</main>
                                        </div>
                                        <div class="m-1" style="float: left; width: 10%;"><img src="/page/dog.png"
                                                style="width: 150px; height: 150px;"></div>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 p-0" id="autoFeed">
                            <a class="text-decoration-none" href='#'>
                                <div class="card m-2 square p-2">
                                    <button class="menuButton" id="remote_feed_b">
                                    <header class="m-3">
                                        <h4 class="font1">사료 원격 제공</h4>
                                    </header>
                                    <div>
                                        <img src="/page/auto-feed/img/remote.png" style="width: 150px; height: 150px;">
                                    </div>
                                    </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-6 p-0" id="autoWater">
                            <a class="text-decoration-none" href='#'>
                                <div class="card m-2 square p-2">
                                    <button class="menuButton" id="reserve_feed_b">
                                    <header class="m-3">
                                        <h4 style="color: black;" class="font1">사료 제공 예약</h4>
                                    </header>
                                    <div><img src="/page/auto-feed/img/reserve.png"
                                            style="width: 150px; height: 150px;"></div>
                                    </button>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 p-0" id="autoFeed">
                            <a class="text-decoration-none" href='#'>
                                <div class="card m-2 square p-2">
                                    <button class="menuButton" id="check_feeded_b">
                                    <header class="m-3">
                                        <h4 style="color: black;" class="font1">사료 섭취 확인</h4>
                                    </header>
                                     
                                    <div><img src="/page/auto-feed/img/check.png" style="width: 150px; height: 150px;">
                                    </div>
                                </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-6 p-0" id="autoWater">
                            <a class="text-decoration-none" href='#'>
                                <div class="card m-2 square p-2">
                                    <button class="menuButton" id="humidity_control_b">
                                    <header class="m-3">
                                        <h4 style="color: black;" class="font1">사료통 습도조절</h4>
                                    </header>
                                     
                                    <div><img src="/page/auto-feed/img/humidity.png"
                                            style="width: 150px; height: 150px;"></div>
                                    </button>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 p-0" id="autoFeed">
                            <a class="text-decoration-none" href='#'>
                                <div class="card m-2 square p-2">
                                    <button class="menuButton" id="feed_container_b">
                                    <header class="m-3">
                                        <h4 style="color: black;" class="font1">사료통 상태</h4>
                                    </header>
                                     
                                    <div><img src="/page/auto-feed/img/container.jpg"
                                            style="width: 150px; height: 150px;"></div>
                                    </button>
                                </div>
                            </a>
                        </div>
                        <div class="col-6 p-0" id="autoWater">
                            <a class="text-decoration-none" href='#'>
                                <div class="card m-2 square p-2">
                                    <button class="menuButton" id="feed_management_b">
                                    <header class="m-3">
                                        <h4 style="color: black;" class="font1">사료 관리</h4>
                                    </header>
                                     
                                    <div><img src="/page/auto-feed/img/management.png"
                                            style="width: 150px; height: 150px;"></div>
                                    </button>
                                </div>
                            </a>
                        </div>
                    </div>
                    <!-- 메인 컨텐츠 끝 -->
                </div>
            </div>

        </div>
    </div>
    <script>
        let feed = 60;
        let feed_cont = 0;
        let humidity = 80;
        let reserve_cont = 0;
        let reserve_time = [];

        $("#remote_feed_b").click(function () {
            Swal.fire({
             title: '원격으로 사료를 제공하시겠습니까?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '제공',
            cancelButtonText: '취소',
            }).then((result) => {
                 if (result.isConfirmed) {
                     const Toast = Swal.mixin({
                     toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
                    didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer)
                    toast.addEventListener('mouseleave', Swal.resumeTimer)
                    }
                    })
                     Toast.fire({
                    icon: 'success',
                    title: '사료를 제공중입니다.'
                    })
                    setTimeout(function(){
                    Swal.fire({
                    icon: 'success',
                    title: '사료 제공 완료!',
                    text: '원격으로 사료 제공이 완료되었습니다!',
                });
                },3000);
                feed = feed - 5;
                feed_cont = feed_cont + 1;
            }
    })

    
  });
        

        $('#reserve_feed_b').on('click', function () {
            (async () => {
                let { value : r_time } = await Swal.fire({
                title: '예약 시간을 입력하세요',
                text: '예시 : 12:55 (양식을 맞추어주세요) ',
                input: 'text',
                inputPlaceholder: '예약 시간'
            })
            if (r_time) {
                reserve_cont = reserve_cont + 1;
                reserve_time.push(r_time);
                Swal.fire(r_time+'으로 예약되었습니다!','','success');
            }
            else{
                Swal.fire('예약이 취소되었습니다','','error');
            }
         })()
        })

        $('#check_feeded_b').on('click', function () {
            let eat = (Math.random(2)*10)%2;
            if(eat > 1){
                console.log(eat);
                Swal.fire({
                icon: 'error',
                title: '사료가 남아있어요',
            });
            }
            else{
                console.log(eat);
                Swal.fire({
                icon: 'success',
                title: '사료를 다 먹었습니다!',
    });
            }
        })
        
        
        $('#humidity_control_b').on('click', function () {
            (async () => {
                let { value : set_humidity } = await Swal.fire({
                title: '현재 습도는 '+humidity+'%입니다.',
                text: '습도를 몇%로 조정할까요? (적정습도 50% ~ 70%)',
                input: 'text',
                inputPlaceholder: 'ex - 40'
            })
            if (set_humidity) {
                humidity = set_humidity;
                Swal.fire('습도를 '+humidity+'%로 설정했습니다!','','success');
            }
            else{
                Swal.fire('예약이 취소되었습니다','','error');
            }
         })()
        })
        
        
        $('#feed_container_b').on('click', function () {
            let msg = '사료통의 상태가 좋습니다!';
            let icon = 'success';
            if(feed < 50 && humidity > 70){
                msg = '사료의 양이 적습니다! 습도가 높습니다!';
                icon = 'warning';
            }
            else if(feed < 50 && humidity < 70){
                msg = '사료의 양이 적습니다';
                icon = 'warning';
            }
            else if(feed > 50 && humidity > 70){
                msg = '습도가 높습니다';
                icon = 'warning';
            }
            Swal.fire(
                '남은 사료 '+feed+'%\n'
                +'현재 습도 '+humidity+'%\n'
                ,msg,icon);
        })
        
        $('#feed_management_b').on('click', function () {
            Swal.fire('오늘 사료 제공 횟수 : '+feed_cont
            +'\n예약된 사료 제공 횟수 :'+reserve_cont
            +'\n예약 시간 : '+reserve_time,'','success');
        })
      </script>
</body>
<script>
    setStatusBar();
</script>
<style>

</style>

</html>