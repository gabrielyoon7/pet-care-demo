<!DOCTYPE html>
<html lang="en">
<!-- 메인 페이지 -->

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="/theme/js/main.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/theme/css/style.css">
    <!---sweet alert 이용을 위해 추가한 코드 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <link
         href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
         crossorigin="anonymous"
      />
    <title>Auto-Feed</title>
    <style>
        .main_text{
            margin:1%;
        }
        .menu{
            float: left;
            width: 50%;
            height: 50%;
        }
        .menu_button{
            border : 1px solid gray;
            background-color: white;
            margin: 2%;
            width: 80%;     
        }
        .button_img{
            float: center;
            width: 66%;
            height: 90%;
        }
        
    </style>
</head>

<body>
    <div class="text-center">
        <div class="container-mobile">
            <div class="bg-white sticky-top">
                <!-- 상태바 시작-->
                <div class="d-flex justify-content-between pt-2 px-4" id="status-bar">
                    <div><b>12:00</b></div>
                    <div>
                        <i class="bi bi-bluetooth"></i>
                        <i class="bi bi-bar-chart-fill"></i>
                        <i class="bi bi-wifi"></i>
                        <i class="bi bi-battery-full"></i>
                    </div>
                </div>
                <!-- 상태바 끝-->
                <!-- 상단바 시작-->
                <div class="border-bottom d-flex justify-content-between pt-3 px-2">
                    <div class="my-2">
                        <button class="btn btn-default" type="button" onclick="location.href='../my-page' ">
                          <h2 class="m-0"><i class="bi bi-list"></i></h2>
                        </button>
                    </div>
                    <div class="my-2 py-3">
                        <h1><b>자동 급식기</b></h1>
                    </div>
                    <div class="my-2">
                        <button class="btn btn-default" type="button" onclick="location.href='../notification' ">
                          <h2 class="m-0"><i class="bi bi-bell-fill"></i></h2>
                        </button>
                    </div>
                </div>
                <!-- 상단바 끝 -->
            </div>
            <div id="main-content" class="px-4 pb-5">
                <div id="home-center">
                    <!-- 메인 컨텐츠 시작 -->
                    <div class="main_text">
                        <p>우리 사랑스러운 아이가 밥을 먹을 수 있도록 도와요</p>
                    </div>
                        <div class="menu_wrapper">
                            
                            <div id="remote_feed" class="menu">
                                <button class="menu_button" id="remote_feed_b">
                                    <img src="./img/remote.png" class="button_img">
                                    <br>
                                    <span class="button_text">사료 원격 제공</span>
                                </button>
                            </div>
                            
                            <div id="reserve_feed" class="menu">
                                <button class="menu_button" id="reserve_feed_b">
                                    <img src="./img/reserve.png" class="button_img" id="remote_feed_b">
                                    <br>
                                    <span class="button_text">사료 제공 예약</span>
                                </button>
                            </div>
                           
                            <div id="check_feeded" class="menu">
                                <button class="menu_button" id="check_feeded_b">
                                    <img src="./img/check.png" class="button_img">
                                    <br>
                                    <span class="button_text">사료 섭취 확인</span>
                                </button>
                            </div>
                            
                            <div id="humidity_control" class="menu">
                                <button class="menu_button" id="humidity_control_b">
                                    <img src="./img/humidity.png" class="button_img">
                                    <br>
                                    <span class="button_text">사료통 습도 조절</span>
                                </button>
                            </div>
                        
                            <div id="feed_container" class="menu">
                                <button class="menu_button" id="feed_container_b">
                                    <img src="./img/container.jpg" class="button_img">
                                    <br>
                                    <span class="button_text">사료통 상태</span>
                                </button>
                            </div>
                            
                            <div id="feed_management" class="menu">
                                <button class="menu_button" id="feed_management_b">
                                    <img src="./img/management.png" class="button_img">
                                    <br>
                                    <span class="button_text">사료 관리</span>
                                </button>
                            </div>

                        </div>                            
                    
                    <!-- 메인 컨텐츠 끝 -->
                </div>
            </div>
        </div>
    </div>
    <script>
        let feed = 60;
        let humidity = 20;

        $("#remote_feed_b").click(function () {
            Swal.fire({
             title: '원격으로 사료를 제공하시겠습니까?',
            icon: 'question',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: '제공',
            cancelButtonText: '취소',
            }).then((result) => {
                 if (result.isConfirmed) {
                     const Toast = Swal.mixin({
                     toast: true,
                    position: 'center',
                    showConfirmButton: false,
                    timer: 3000,
                    timerProgressBar: true,
            didOpen: (toast) => {
                toast.addEventListener('mouseenter', Swal.stopTimer)
                toast.addEventListener('mouseleave', Swal.resumeTimer)
      }
    })
    Toast.fire({
      icon: 'success',
      title: '사료를 제공중입니다.'
    })
    setTimeout(function(){
        Swal.fire({
      icon: 'success',
      title: '사료 제공 완료!',
      text: '원격으로 사료 제공이 완료되었습니다!',
    });
    },3000);
      }
    })


            
    
  });
        

        $('#reserve_feed_b').on('click', function () {
            (async () => {
                let { value : r_time } = await Swal.fire({
                title: '예약 시간을 입력하세요',
                text: '예시 : 12:55 (양식을 맞추어주세요) ',
                input: 'text',
                inputPlaceholder: '예약 시간'
            })
            if (r_time) {
                Swal.fire(r_time+'으로 예약되었습니다!','','success');
            }
            else{
                Swal.fire('예약이 취소되었습니다','','error');
            }
    })()
        })

        $('#check_feeded_b').on('click', function () {
            let eat = (Math.random(2)*10)%2;
            if(eat > 1){
                console.log(eat);
                Swal.fire({
                icon: 'error',
                title: '사료가 남아있어요',
            });
            }
            else{
                console.log(eat);
                Swal.fire({
                icon: 'success',
                title: '사료를 다 먹었습니다!',
    });
            }
        })
        
        
        $('#humidity_control_b').on('click', function () {
            Swal.fire('현재 습도 '+humidity+'%');
        })
        
        
        $('#feed_container_b').on('click', function () {
            Swal.fire(
                '남은 사료 '+feed+'%\n'
                +'현재 습도 '+humidity+'%\n'
                
            ,'','success');
        })
        
        
        $('#feed_management_b').on('click', function () {
          
        })
      </script>
      
</body>
<script>
    setStatusBar();
</script>
<style>

</style>

</html>
